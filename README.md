# üõ†Ô∏è DocuGen

[![License: GPL v3](https://img.shields.io/badge/License-GPLv3-blue.svg)](https://www.gnu.org/licenses/gpl-3.0)
[![Python 3.11+](https://img.shields.io/badge/python-3.11+-blue.svg)](https://www.python.org/downloads/)
[![Built with PySide6](https://img.shields.io/badge/UI-PySide6-green.svg)](https://www.qt.io/qt-for-python)

**DocuGen** is a high-performance, professional tool for generating [Zeal](https://zealdocs.org/) and [Dash](https://kapeli.com/dash) compatible docsets from any website or online documentation. It combines a modern Qt6 graphical interface with a powerful CLI, featuring advanced JavaScript rendering and smart asset localization.

---

## üöÄ Key Features

-   **Intelligent URL Discovery**: Automatically scans for reachable links, subdomains, and assets before generation begins.
-   **Granular Control**: A refined two-pane selection system allows you to pick exactly which pages and external links to include.
-   **Hybrid JS Rendering Engines**:
    -   **Playwright (Chromium)**: For heavy-duty, pixel-perfect rendering of complex SPAs.
    -   **QtWebEngine**: Integrated, lightweight engine with "Stability Polling" to ensure dynamic content is fully loaded.
-   **Deep Asset Localization**: Downloads and rewrites CSS, JS, images (including `srcset` and `url()` references), and favicons for complete offline usage.
-   **First-Class Parser Support**: Specialized logic for common documentation platforms:
    -   **Sphinx**, **Docusaurus**, **Rustdoc**, and **Generic HTML**.
-   **Resilient Networking**: Built-in exponential backoff and automatic retries for stable downloads on unstable connections.
-   **Professional Output**: Automatically generates clean, human-readable docset names and structures.

## üì¶ Installation

### Prerequisites

-   **Python 3.11 or higher**
-   **[uv](https://github.com/astral-sh/uv)** (Recommended for dependency management)

### Quick Start

1.  **Clone the Repository**
    ```bash
    git clone https://github.com/grahamhill/docsetGenerator.git
    cd docsetGenerator
    ```

2.  **Environment Setup**

    Using `uv` (recommended):
    ```bash
    uv venv
    source .venv/bin/activate
    uv sync
    ```

    Using `pip`:
    ```bash
    python -m venv .venv
    source .venv/bin/activate
    pip install .
    ```

3.  **Install Playwright Browsers** (Required for the Playwright engine):
    ```bash
    playwright install chromium
    ```

## üõ† Usage

### üñ• Graphical Interface (GUI)

Launch the modern desktop application for an interactive experience:

```bash
docugen
```

1.  **Source URLs**: Enter one or more base documentation URLs.
2.  **Engine Selection**: Choose between Playwright (best for JS), QtWebEngine, or None (fastest for static sites).
3.  **Discovery Scan**: Run the initial scan to map the site structure.
4.  **Refine Selection**: Use the selection dialog to include/exclude specific sections.
5.  **Build**: Choose your output directory and generate your `.docset`.

### üíª Command Line Interface (CLI)

Perfect for automation and power users:

```bash
docugen https://docs.python.org/3/ --out Python.docset --js --max-pages 500
```

#### CLI Options

| Option | Shorthand | Description | Default |
| :--- | :--- | :--- | :--- |
| `urls` | | One or more source URLs (positional) | |
| `--out` | | Path to the output `.docset` directory | **Required** |
| `--js` | | Enable JavaScript rendering (Playwright) | `False` |
| `--max-pages` | | Maximum number of pages to crawl | `250` |
| `--verbose` | `-v` | Enable detailed logging | `False` |
| `--force` | `-f` | Clear output directory and re-download assets | `False` |

## üèó Technical Architecture

DocuGen is built with modularity and extensibility in mind:

-   **`core.py`**: The central engine managing the crawl and generation lifecycle.
-   **`fetch/`**: Modular fetching system supporting standard HTTP, Playwright, and QtWebEngine.
-   **`parsers/`**: Strategy-based parsers for different documentation styles.
-   **`assets/`**: Advanced discovery and localization engine for offline assets.
-   **`docset/`**: Builder for the standard `.docset` format and SQLite indexing.

## üß™ Development & Testing

We use `pytest` for ensuring stability across the toolchain.

```bash
# Run all tests
pytest tests/

# Run with coverage (if installed)
pytest --cov=src tests/
```

## üìÑ License & Disclaimer

Distributed under the **GPLv3 License**. See `LICENSE` for more information.

### Note on Content Licensing
Docsets generated by DocuGen are subject to the license of the original source content. Users are responsible for ensuring their use of generated docsets complies with the original content's licensing terms. Generated docsets are intended for personal reference and offline documentation access.

---
*Maintained by [grahamhill](https://github.com/grahamhill)*
